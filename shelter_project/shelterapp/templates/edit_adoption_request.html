<!DOCTYPE html>
<html>
<head>
    <title>Edit Adoption Request</title>
</head>
<body>
    <h1>Edit Adoption Request</h1>
    {% if error %}
    <p style="color: red;">{{ error }}</p>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <label for="adoption_id">Select Adoption Request:</label>
        <select name="adoption_id" id="adoption_id" required>
            <option value="">-- Select an Adoption Request --</option>
            {% for request in adoption_requests %}
            <option value="{{ request.adoptionID }}" {% if selected_request and request.adoptionID == selected_request.adoptionID %}selected{% endif %}>
                {{ request.adoptionID }} - {{ request.adopterID }} adopting {{ request.animalID }}
            </option>
            {% endfor %}
        </select>
        <button type="submit">Load Adoption Request</button>
    </form>
    <br>
    {% if form %}
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="adoption_id" value="{{ selected_request.adoptionID }}">  <!-- Hidden input for adoption_id -->
        <fieldset>
            <legend>Update Adoption Request Details</legend>
            {{ form.as_p }}
            {% if selected_request and selected_request.adoptionStatus == 'accepted' %}
                <p style="color: red;">This adoption request has already been accepted and cannot be modified.</p>
            {% else %}
                <button type="submit">Update Adoption Request</button>
            {% endif %}
        </fieldset>
    </form>
    {% endif %}
    <a href="{% url 'staff_dashboard' %}">Back to Dashboard</a>
    
</body>
</html>
